<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>华北浪漫革命首场演出 - 北京青年之声</title>

  <!-- 引入 CSS -->
  <link rel="stylesheet" href="../../../css/style.css">
  <link rel="stylesheet" href="../../../css/player.css">
  <link rel="stylesheet" href="live-detail.css">
  <link rel="stylesheet" href="yuyue.css">

</head>
<body>

  <!-- 侧边栏 -->
  <div id="sidebar" class="sidebar">
    <nav class="sidebar-nav">
      <ul>
        <li><a href="../../../index.htm" target="_self">首页</a></li>
        <li><a href="../../albums/albums.html">专辑</a></li>
        <li><a href="../../singles/singles.html">单曲</a></li>
        <li><a href="../live.html">现场</a></li>
      </ul>
    </nav>
  </div>

  <!-- 页面头部 -->
  <header>
    <h1>华北浪漫革命首场演出</h1>
    <p>北京青年之声 - 2024.12.15</p>
  </header>

  <!-- 主体内容 -->
  <main>
    <!-- 返回按钮 -->
    <a href="../live.html" class="back-button">← 返回现场列表</a>

    <!-- ==========================================
         第一个演出：牢骚
         ========================================== -->
    <div class="performance-section">
      <h2 class="performance-title">《牢骚》- 华北浪漫革命原创</h2>
      
      <div class="live-detail">
        <!-- 左边：视频播放器 -->
        <div class="video-section">
          <div class="video-container">
            <video controls preload="metadata" poster="../../../../../cover/live/北京青年之声.png">
              <source src="../../../../../video/北京青年广播牢骚.mp4" type="video/mp4">
              您的浏览器不支持 HTML5 视频播放。
              <p>如果视频无法播放，请 <a href="../../../../../video/北京青年广播牢骚.mp4" download>点击下载视频</a></p>
            </video>
          </div>
        </div>

         <!-- sandbox="allow-top-navigation allow-same-origin allow-forms allow-scripts" -->

        

        <!-- 右边：演出信息和歌词 -->
        <div class="info-section">
          <!-- 标签按钮 -->
          <div class="tabs">
            <div class="tab active" data-target="info1">演出信息</div>
            <div class="tab" data-target="lyrics1">歌词</div>
            <div class="tab" data-target="story1">创作背景</div>
          </div>

          <!-- 标签内容：演出信息 -->
          <div id="info1" class="tab-content active">
            <div class="live-info">
              <h3>演出详情</h3>
              
              <div class="detail-item">
                <span class="detail-label">曲目名称:</span>
                <span class="detail-value">牢骚</span>
              </div>
              
              <div class="detail-item">
                <span class="detail-label">演出时间:</span>
                <span class="detail-value">2024年12月15日</span>
              </div>
              
              <div class="detail-item">
                <span class="detail-label">演出地点:</span>
                <span class="detail-value">北京·某某Live House</span>
              </div>
              
              <div class="detail-item">
                <span class="detail-label">曲目类型:</span>
                <span class="detail-value">原创作品</span>
              </div>
              
              <div class="detail-item">
                <span class="detail-label">演出介绍:</span>
                <span class="detail-value">华北浪漫革命的代表作品，用音乐表达年轻人对时代的思考，不是简单的抱怨，而是积极的表达。</span>
              </div>
              
              <div class="detail-item">
                <span class="detail-label">主唱:</span>
                <span class="detail-value">秋秋叶</span>
              </div>
              
              <div class="detail-item">
                <span class="detail-label">创作特色:</span>
                <span class="detail-value">融合了现代都市青年的情感与传统音乐元素</span>
              </div>
            </div>
          </div>

          <!-- 标签内容：歌词 -->
          <div id="lyrics1" class="tab-content">
            <div id="lyrics-text-1" class="lyrics-container">
              <h4 style="color: white; margin-bottom: 15px;">《牢骚》</h4>
              <div class="lyrics-content">
                <div style="text-align: center; padding: 40px; color: #999;">
                  <p>🎵</p>
                  <p>正在加载歌词...</p>
                </div>
              </div>
            </div>
          </div>

          <!-- 标签内容：创作背景 -->
          <div id="story1" class="tab-content">
            <div class="story-content">
              <h3>创作背景</h3>
              <div class="story-text">
                <p>《牢骚》诞生于2024年的北京，那是一个充满变革的时代。华北浪漫革命的成员们经常在深夜的排练室里讨论着这个时代年轻人的困惑和希望。</p>
                
                <p>这首歌的创作灵感来源于日常生活中的观察和思考。当代年轻人面临着前所未有的压力和挑战，但同时也拥有着前所未有的机遇和可能性。</p>
                
                <p>乐队希望通过这首歌告诉听众：牢骚不是消极的抱怨，而是积极的表达。每一句"牢骚"都是对现实的关注，对未来的期待。</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ==========================================
         第二个演出：Make You Feel My Love
         ========================================== -->
    <div class="performance-section" style="margin-top: 50px;">
      <h2 class="performance-title">《Make You Feel My Love》- Bob Dylan 经典翻唱</h2>
      
      <div class="live-detail">
        <!-- 左边：视频播放器 -->
        <div class="video-section">
          <div class="video-container">
            <video controls preload="metadata" poster="../../../../../cover/live/make-you-feel-my-love.jpg">
              <source src="../../../../../video/Make You Feel My Love.mp4" type="video/mp4">
              <source src="../../../../../video/Make You Feel My Love.webm" type="video/webm">
              您的浏览器不支持 HTML5 视频播放。
              <p>如果视频无法播放，请 <a href="../../../../../video/Make You Feel My Love.mp4" download>点击下载视频</a></p>
            </video>
          </div>
        </div>

        <!-- 右边：演出信息和歌词 -->
        <div class="info-section">
          <!-- 标签按钮 -->
          <div class="tabs">
            <div class="tab active" data-target="info2">演出信息</div>
            <div class="tab" data-target="lyrics2">歌词</div>
            <div class="tab" data-target="story2">翻唱背景</div>
          </div>

          <!-- 标签内容：演出信息 -->
          <div id="info2" class="tab-content active">
            <div class="live-info">
              <h3>演出详情</h3>
              
              <div class="detail-item">
                <span class="detail-label">曲目名称:</span>
                <span class="detail-value">Make You Feel My Love</span>
              </div>
              
              <div class="detail-item">
                <span class="detail-label">演出时间:</span>
                <span class="detail-value">2024年12月15日</span>
              </div>
              
              <div class="detail-item">
                <span class="detail-label">演出地点:</span>
                <span class="detail-value">北京·某某Live House</span>
              </div>
              
              <div class="detail-item">
                <span class="detail-label">曲目类型:</span>
                <span class="detail-value">Bob Dylan 经典翻唱</span>
              </div>
              
              <div class="detail-item">
                <span class="detail-label">演出介绍:</span>
                <span class="detail-value">华北浪漫革命对Bob Dylan经典作品的重新诠释，用中文和英文双语演唱，展现音乐跨越语言的力量。</span>
              </div>
              
              <div class="detail-item">
                <span class="detail-label">主唱:</span>
                <span class="detail-value">刘森</span>
              </div>
              
              <div class="detail-item">
                <span class="detail-label">演出特色:</span>
                <span class="detail-value">双语演唱，融合中西方音乐情感表达</span>
              </div>
            </div>
          </div>

          <!-- 标签内容：歌词 -->
          <div id="lyrics2" class="tab-content">
            <div id="lyrics-text-2" class="lyrics-container">
              <h4 style="color: white; margin-bottom: 15px;">《Make You Feel My Love》</h4>
              <div class="lyrics-content">
                <div style="text-align: center; padding: 40px; color: #999;">
                  <p>🎵</p>
                  <p>正在加载歌词...</p>
                </div>
              </div>
            </div>
          </div>

          <!-- 标签内容：翻唱背景 -->
          <div id="story2" class="tab-content">
            <div class="story-content">
              <h3>翻唱背景</h3>
              <div class="story-text">
                <p>《Make You Feel My Love》是Bob Dylan于1997年创作的经典作品，后来被无数艺术家翻唱。华北浪漫革命选择这首歌，是因为它体现了音乐的普世价值。</p>
                
                <p>在这次演出中，乐队采用了独特的双语演唱方式，既保持了原作的英文韵味，又加入了中文的情感表达。这种演绎方式展现了音乐跨越语言和文化的力量。</p>
                
                <p>刘森的演唱风格为这首经典作品注入了新的生命力，既有Bob Dylan原作的深情，又有华北浪漫革命独特的音乐气质。</p>
                
                <p>这首歌在演出中的位置也很特别 - 它紧随原创作品《牢骚》之后，形成了从个人思考到普世情感的完美过渡。</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- 页脚 -->
  <footer>
    <p>© 2025 华北浪漫革命</p>
  </footer>

  <!-- JavaScript -->
  <script src="../../../js/main.js"></script>
  <script src="../../../js/live-detail.js"></script>
  
  <script>
    // 多演出区域标签切换功能 + 歌词同步功能
    document.addEventListener('DOMContentLoaded', function() {
      // 获取所有演出区域
      const performanceSections = document.querySelectorAll('.performance-section');
      
      performanceSections.forEach((section, sectionIndex) => {
        const tabs = section.querySelectorAll('.tab');
        const contents = section.querySelectorAll('.tab-content');
        const video = section.querySelector('video');
        
        // 标签切换功能
        tabs.forEach(tab => {
          tab.addEventListener('click', () => {
            const target = tab.getAttribute('data-target');
            
            // 只在当前演出区域内切换标签
            tabs.forEach(t => t.classList.remove('active'));
            contents.forEach(c => c.classList.remove('active'));
            
            tab.classList.add('active');
            const targetContent = section.querySelector('#' + target);
            if (targetContent) {
              targetContent.classList.add('active');
            }
          });
        });
        
        // 歌词同步功能 - 为每个视频独立设置
        if (video) {
          const lyricsContainer = section.querySelector('.lyrics-container');
          if (lyricsContainer) {
            // 初始化歌词同步
            initLyricsSyncForVideo(video, lyricsContainer, sectionIndex);
          }
        }
      });
      
      // 歌词同步功能实现
      function initLyricsSyncForVideo(video, lyricsContainer, sectionIndex) {
        let lyricsData = [];
        let isUserScrolling = false;
        let scrollTimeout = null;
        
        // 加载对应的LRC文件
        let lrcPath = '';
        if (sectionIndex === 0) {
          lrcPath = '../../../../../audio/live/北京青年广播牢骚.lrc';
        } else if (sectionIndex === 1) {
          lrcPath = '../../../../../audio/live/Make You Feel My Love.lrc';
        }
        
        // 加载LRC文件
        if (lrcPath) {
          fetch(lrcPath)
            .then(response => {
              if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
              }
              return response.text();
            })
            .then(lrcText => {
              lyricsData = parseLRC(lrcText);
              displayLyrics(lyricsContainer, lyricsData, video);
            })
            .catch(error => {
              console.error('LRC文件加载失败:', error);
              showLyricsError(lyricsContainer);
            });
        }
        
        // 视频时间更新事件
        video.addEventListener('timeupdate', function() {
          syncLyrics(this.currentTime, lyricsContainer, lyricsData, false);
        });
        
        // 视频跳转事件
        video.addEventListener('seeked', function() {
          syncLyrics(this.currentTime, lyricsContainer, lyricsData, true);
        });
        
        // 监听用户手动滚动歌词
        lyricsContainer.addEventListener('scroll', function() {
          isUserScrolling = true;
          clearTimeout(scrollTimeout);
          scrollTimeout = setTimeout(() => {
            isUserScrolling = false;
          }, 2500);
        });
      }
      
      // 解析LRC歌词文件
      function parseLRC(lrcContent) {
        const lines = lrcContent.split('\n');
        const lyricsArray = [];
        
        lines.forEach(line => {
          const match = line.match(/\[(\d+):(\d+(?:\.\d+)?)\](.*)/);
          if (match) {
            const minutes = parseInt(match[1], 10);
            const seconds = parseFloat(match[2]);
            const text = match[3].trim();
            
            if (text) {
              const time = minutes * 60 + seconds;
              lyricsArray.push({ time, text });
            }
          }
        });
        
        return lyricsArray.sort((a, b) => a.time - b.time);
      }
      
      // 显示歌词
      function displayLyrics(container, lyricsData, video) {
        const lyricsContent = container.querySelector('.lyrics-content');
        lyricsContent.innerHTML = '';
        
        lyricsData.forEach((lyric, index) => {
          const p = document.createElement('div');
          p.className = 'lyric-line';
          p.setAttribute('data-time', lyric.time);
          p.setAttribute('data-index', index);
          p.textContent = lyric.text;
          p.style.cursor = 'pointer';
          
          // 点击歌词跳转到对应时间
          p.addEventListener('click', function() {
            video.currentTime = lyric.time;
            syncLyrics(lyric.time, container, lyricsData, true);
          });
          
          lyricsContent.appendChild(p);
        });
      }
      
      // 同步歌词高亮
      function syncLyrics(currentTime, container, lyricsData, forceScroll = false) {
        if (!lyricsData.length) return;
        
        const lyricsLines = container.querySelectorAll('.lyric-line[data-time]');
        if (!lyricsLines.length) return;
        
        let activeLine = null;
        
        // 找到当前时间对应的歌词行
        lyricsLines.forEach(line => {
          const time = parseFloat(line.getAttribute('data-time'));
          line.classList.remove('highlight');
          
          if (currentTime >= time) {
            activeLine = line;
          }
        });
        
        // 高亮当前歌词行
        if (activeLine) {
          activeLine.classList.add('highlight');
          
          // 滚动到当前歌词
          if (forceScroll) {
            activeLine.scrollIntoView({
              behavior: 'smooth',
              block: 'center'
            });
          }
        }
      }
      
      // 显示歌词加载错误
      function showLyricsError(container) {
        const lyricsContent = container.querySelector('.lyrics-content');
        lyricsContent.innerHTML = `
          <div style="text-align: center; padding: 40px; color: #999;">
            <p>😕</p>
            <p>歌词文件加载失败</p>
          </div>
        `;
      }
    });
  </script>
</body>
</html>
